{% extends "base.html"%} {% block title %}TARUMT ITP Portal{% endblock %} {%
block content %}

<div class="container body-content my-3">
  <h2>Welcome : {{ rows[1] }}</h2>
  <span><a href="{{url_for('submitReport')}}"><i class="fa fa-id-card-o"></i> Upload Report</a></span>
  <span> | View</span>
  <form action="{{url_for('profile')}}" method="POST" enctype="multipart/form-data">
    <hr />
    <div class="panel-group mt-2 border border-light-subtle shadow">
      <div class="panel panel-default">
        <div class="panel-heading p-3 bg-light">Summary</div>
        <div class="panel-body p-3">
          <div class="mb-3 row">
            <label for="staticEmail" class="col-sm-2 col-form-label"
              >Cohort</label
            >
            <div class="col-sm-10">
              <label for="staticEmail" class="col-sm-2 col-form-label"
                >{{ rows[5]}}</label
              >
            </div>
          </div>
          <div class="mb-3 row">
            <label for="inputPassword" class="col-sm-2 col-form-label"
              >Intern Period</label
            >
            <div class="col-sm-10">
              <label for="inputPassword" class="col-sm-2 col-form-label"
                >25 Oct 2021 - 02 Jan 2022</label
              >
            </div>
          </div>
          <div class="mb-3 row">
            <label for="staticEmail" class="col-sm-2 col-form-label"
              >Status</label
            >
            <div class="col-sm-10">
              <label for="staticEmail" class="col-sm-2 col-form-label"
                >Pending</label
              >
            </div>
          </div>
          <div class="mb-3 row">
            <label for="inputPassword" class="col-sm-2 col-form-label"
              >Remark</label
            >
            <div class="col-sm-10">
              <label for="inputPassword" class="col-sm-2 col-form-label"
                >Intern Ended</label
              >
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="panel-group mt-2 border border-light-subtle shadow">
      <div class="panel panel-default">
        <div class="panel-heading p-3 bg-light">Student Detail</div>
        <div class="panel-body p-3">
          <div class="mb-3 row">
            <label for="staticEmail" class="col-sm-2 col-form-label"
              >Student Name</label
            >
            <div class="col-sm-10">
              <label for="staticEmail" class="col-sm-2 col-form-label"
                >{{ rows[1] }}</label
              >
            </div>
          </div>
          <div class="mb-3 row">
            <label for="inputPassword" class="col-sm-2 col-form-label"
              >Student ID</label
            >
            <div class="col-sm-10">
              <label for="inputPassword" class="col-sm-2 col-form-label"
                >{{ rows[2] }}</label
              >
            </div>
          </div>
          <div class="mb-3 row">
            <label for="staticEmail" class="col-sm-2 col-form-label"
              >NRIC No.</label
            >
            <div class="col-sm-10">
              <label for="staticEmail" class="col-sm-2 col-form-label"
                >{{ rows[3] }}</label
              >
            </div>
          </div>
          <div class="mb-3 row">
            <label for="inputPassword" class="col-sm-2 col-form-label"
              >Gender</label
            >
            <div class="col-sm-10">
              <label for="inputPassword" class="col-sm-2 col-form-label"
                >{{ rows[4] }}</label
              >
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="panel-group mt-2 border border-light-subtle shadow">
      <div class="panel panel-default">
        <div class="panel-heading p-3 bg-light">UC Supervisor</div>
        <div class="panel-body p-3">
          <div class="mb-3 row">
            <label for="staticEmail" class="col-sm-2 col-form-label"
              >UC Supervisor Name</label
            >
            <div class="col-sm-10">
              <input
                type="text"
                class="form-control"
                id="ucSupervisorName"
                value="{{sv_rows[1]}}"
                name="ucSupervisorName1"
              />
            </div>
          </div>
          <div class="mb-3 row">
            <label for="email" class="col-sm-2 col-form-label"
              >UC Supervisor Email</label
            >
            <div class="col-sm-10">
              <input
                type="email"
                disabled
                class="form-control"
                id="ucSupervisorEmail"
                name="ucSupervisorEmail"
                value="{{sv_rows[2]}}"
              />
            </div>
          </div>
          <div class="mb-3 row">
            <div class="col-sm-2">
              <input type="submit" value="Update" name="submit_button" />
            </div>
          </div>  
        </div>
      </div>
    </div>
    <div class="panel-group mt-2 border border-light-subtle shadow">
      <div class="panel panel-default">
        <div class="panel-heading p-3 bg-light">Company Detail</div>
        <div class="panel-body p-3">
          <div class="mb-3 row">
            <label for="staticEmail" class="col-sm-2 col-form-label"
              >Company Name</label
            >
            <div class="col-sm-10">
              <select name="companyName" id="compName" class="form-select" required>
                {% if comp_rows[0] %}
                <option selected> {{ comp_rows[1] }} </option>
                {% else %}
                <option selected>-- Select One --</option>
                {% endif %}
              </select>
            </div>
          </div>
          <div class="mb-3 row">
            <label for="inputPassword" class="col-sm-2 col-form-label"
              >Address 1</label
            >
            <div class="col-sm-10">
              <textarea
              id="address1"
                class="form-control"
                rows="2"
                disabled
                name="address-1"
              >{{ comp_rows[2] }}</textarea>
            </div>
          </div>
          <div class="mb-3 row">
            <label for="staticEmail" class="col-sm-2 col-form-label"
              >Address 2</label
            >
            <div class="col-sm-10">
              <textarea
              id="address2"
                class="form-control"
                rows="2"
                disabled
                name="address-2"
              >{{ comp_rows[3] }}</textarea>
            </div>
          </div>
          <div class="mb-3 row">
            <label for="inputPassword" class="col-sm-2 col-form-label"
              >Monthly Allowance</label
            >
            <div class="col-sm-10">
              <input
                type="text"
                class="form-control"
                id="staticEmail"
                name="monthlyAllowance"
                required              
                value="{{rows[24]}}"/>
            </div>
          </div>
          <div class="mb-3 row">
            <label for="inputPassword" class="col-sm-2 col-form-label"
              >Com. Supervisor Name</label
            >
            <div class="col-sm-10">
              <input
                type="text"
                class="form-control"
                id="staticEmail"
                name="comSvName"
                required
                value="{{rows[25]}}"
              />
            </div>
          </div>
          <div class="mb-3 row">
            <label for="inputPassword" class="col-sm-2 col-form-label"
              >Com. Supervisor Email</label
            >
            <div class="col-sm-10">
              <input
                type="text"
                class="form-control"
                id="staticEmail"
                name="comSvEmail"
                required
                value="{{rows[26]}}"
              />
            </div>
          </div>
          <div class="mb-3 row">
            <label for="inputPassword" class="col-sm-2 col-form-label"
              >Com. Acceptance Form</label
            >
            <div class="col-sm-10">
              <input
                class="form-control"
                type="file"
                id="acceptForm"
                name="acceptForm"
                required
              >
            </div>
          </div>
          <div class="mb-3 row">
            <label for="inputPassword" class="col-sm-2 col-form-label"
              >Parent Ack. Form</label
            >
            <div class="col-sm-10">
              <input
                class="form-control"
                type="file"
                id="formFile"
                name="parentAckForm"
                required
              />
            </div>
          </div>
          <div class="mb-3 row">
            <label for="inputPassword" class="col-sm-2 col-form-label"
              >Letter of Indemnity</label
            >
            <div class="col-sm-10">
              <input
                class="form-control"
                type="file"
                id="formFile"
                name="indemnityLetter"
                required
              />
            </div>
          </div>
          <div class="mb-3 row">
            <div class="col-sm-2">
              <input type="submit" value="Submit" name="submit_button" />
            </div>
          </div>
        </div>
      </div>
    </div>
  </form>
</div>
<script>
  $("#ucSupervisorName").change(function () {
    $.ajax({
      url: "",
      type: "get",
      contentType: "application/json",
      data: {
        ucSupervisorName: $(this).val(),
      },
      success: function (response) {
        $("#ucSupervisorEmail").val(response.ucSupervisorEmail);
      },
    });
  });

  $(document).ready(function () {
    $.ajax({
      url: "./process_company",
      type: "get",
      contentType: "application/json",
      data: {
        companyName: $(this).val(),
      },
      success: function (response) {
        $.each(response, function (index, innerArray) {
          $("#compName").append(
            '<option value="' +innerArray[0] +'">' +innerArray[0] + "</option>"
          );
        });
      },
    });
  });

  $("#compName").change(function(){
    $.ajax({
      url: "./process_address",
      type: "get",
      contentType: "application/json",
      data: {
        companyName: $(this).val(),
      },
      success: function (response) {
        $("#address1").val(response[0]);
        $("#address2").val(response[1]);
      },
    })
  }) 

</script>

{% endblock %}
